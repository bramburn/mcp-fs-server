{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Multi-Provider Index Configuration",
  "description": "Configuration for Code Search with support for multiple vector databases and embedding providers",
  "type": "object",
  "required": ["active_vector_db", "active_embedding_provider"],
  "properties": {
    "active_vector_db": {
      "type": "string",
      "enum": ["qdrant", "pinecone"],
      "default": "qdrant",
      "description": "The vector database to use for storage"
    },
    "active_embedding_provider": {
      "type": "string",
      "enum": ["ollama", "openai", "gemini"],
      "default": "ollama",
      "description": "The service used to generate embeddings"
    },
    "index_info": {
      "type": "object",
      "description": "Metadata about current index state",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of collection/index",
          "default": "codebase-index"
        },
        "version": {
          "type": "string",
          "description": "Version of index schema"
        },
        "embedding_dimension": {
          "type": "integer",
          "default": 768,
          "description": "Vector size for embedding model (e.g., 1536 for OpenAI text-embedding-3-small, 768 for Nomic/Gemini)"
        }
      }
    },
    "qdrant_config": {
      "type": "object",
      "required": ["url"],
      "properties": {
        "url": {
          "type": "string",
          "description": "URL of Qdrant instance",
          "default": "http://localhost:6333"
        },
        "api_key": {
          "type": "string",
          "description": "API Key for Qdrant cloud (optional for local)"
        }
      }
    },
    "pinecone_config": {
      "type": "object",
      "required": ["index_name", "api_key"],
      "properties": {
        "index_name": {
          "type": "string",
          "description": "Name of the Pinecone index"
        },
        "api_key": {
          "type": "string",
          "description": "Pinecone API key"
        }
      }
    },
    "ollama_config": {
      "type": "object",
      "required": ["model", "base_url"],
      "properties": {
        "base_url": {
          "type": "string",
          "description": "Base URL for Ollama API",
          "default": "http://localhost:11434"
        },
        "model": {
          "type": "string",
          "description": "Embedding model to use",
          "default": "nomic-embed-text"
        }
      }
    },
    "openai_config": {
      "type": "object",
      "required": ["api_key", "model"],
      "properties": {
        "api_key": {
          "type": "string",
          "description": "OpenAI API key"
        },
        "model": {
          "type": "string",
          "description": "OpenAI embedding model name",
          "default": "text-embedding-3-small"
        }
      }
    },
    "gemini_config": {
      "type": "object",
      "required": ["api_key", "model"],
      "properties": {
        "api_key": {
          "type": "string",
          "description": "Google AI API key"
        },
        "model": {
          "type": "string",
          "description": "Gemini embedding model name",
          "default": "text-embedding-004"
        }
      }
    }
  }
}